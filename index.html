<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DSRT Studio Ultimate</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
  body { background: linear-gradient(180deg,#0f0f0f,#1a1a1a); font-family:sans-serif; }
  .card { transition: transform 0.2s, box-shadow 0.2s; }
  .card:hover { transform: translateY(-2px); box-shadow:0 8px 20px rgba(59,130,246,0.5); }
  canvas { background:#111; display:block; margin:0 auto; max-width:100%; border-radius:12px; }
  .premium { color:#facc15; font-weight:bold; }
  .slider { width:100%; }
</style>
</head>
<body class="text-white">

<header class="bg-gray-800 p-4 flex justify-between items-center shadow-md">
  <h1 class="text-2xl font-bold">DSRT Studio Ultimate</h1>
  <nav class="flex space-x-4">
    <button onclick="showPage('landing')" class="px-3 py-2 bg-blue-600 rounded hover:bg-blue-700">Landing Page</button>
    <button onclick="showPage('dashboard')" class="px-3 py-2 bg-gray-700 rounded hover:bg-gray-600">Dashboard</button>
  </nav>
</header>

<!-- Landing -->
<section id="landing" class="p-6">
  <div class="text-center mb-10">
    <h2 class="text-4xl font-bold mb-4">Selamat Datang di DSRT Studio Ultimate</h2>
    <p class="text-gray-300 mb-4">Perbaiki & tingkatkan kualitas foto/gambar dengan teknologi Manual & AI.</p>
    <button onclick="showPage('dashboard')" class="bg-blue-600 hover:bg-blue-700 px-6 py-3 rounded font-semibold">Mulai Sekarang</button>
  </div>
</section>

<!-- Dashboard -->
<section id="dashboard" class="p-6 hidden space-y-6">

  <!-- Upload & Download -->
  <div class="flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0">
    <input id="uploadInput" type="file" accept="image/*" class="px-4 py-2 rounded bg-gray-700 w-full md:w-64">
    <select id="resolutionSelect" class="px-4 py-2 rounded bg-gray-700 text-white">
      <option value="0.25">Kecil (25%)</option>
      <option value="0.5">Sedang (50%)</option>
      <option value="1" selected>Asli (100%)</option>
      <option value="2">Besar (200%)</option>
    </select>
    <button id="downloadBtn" class="bg-green-600 hover:bg-green-700 px-4 py-2 rounded">Download</button>
    <button id="resetBtn" class="bg-red-600 hover:bg-red-700 px-4 py-2 rounded">Reset</button>
    <button id="undoBtn" class="bg-yellow-600 hover:bg-yellow-700 px-4 py-2 rounded">Undo</button>
    <button id="redoBtn" class="bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded">Redo</button>
  </div>

  <!-- Canvas Preview -->
  <canvas id="canvas" width="600" height="400"></canvas>

  <!-- Tabs -->
  <div class="flex flex-col md:flex-row md:justify-between md:items-center mb-4 space-y-2 md:space-y-0">
    <div class="flex space-x-4">
      <button id="manualTab" class="bg-blue-600 px-4 py-2 rounded flex items-center space-x-2"><span>DSRT Manual</span></button>
      <button id="aiTab" class="bg-gray-700 hover:bg-gray-600 px-4 py-2 rounded flex items-center space-x-2"><span>DSRT AI</span></button>
    </div>
    <input id="searchInput" type="text" placeholder="Cari fitur..." class="px-4 py-2 rounded bg-gray-700 placeholder-gray-400 text-white w-full md:w-64">
  </div>

  <!-- Manual Cards -->
  <div id="manualContent" class="grid grid-cols-1 md:grid-cols-2 gap-4">
    <div class="card bg-gray-800 p-4 rounded premium">
      <h3 class="font-bold text-lg">Brightness ðŸ’Ž</h3>
      <input type="range" min="-100" max="100" value="0" class="slider brightnessSlider">
    </div>
    <div class="card bg-gray-800 p-4 rounded premium">
      <h3 class="font-bold text-lg">Saturation ðŸ’Ž</h3>
      <input type="range" min="-100" max="100" value="0" class="slider saturationSlider">
    </div>
    <div class="card bg-gray-800 p-4 rounded premium">
      <h3 class="font-bold text-lg">Hue ðŸ’Ž</h3>
      <input type="range" min="-180" max="180" value="0" class="slider hueSlider">
    </div>
    <div class="card bg-gray-800 p-4 rounded premium">
      <h3 class="font-bold text-lg">Sharpness ðŸ’Ž</h3>
      <input type="range" min="0" max="10" value="0" class="slider sharpnessSlider">
    </div>
    <div class="card bg-gray-800 p-4 rounded premium">
      <h3 class="font-bold text-lg">Noise Reduction ðŸ’Ž</h3>
      <input type="range" min="0" max="10" value="0" class="slider noiseSlider">
    </div>
  </div>

  <!-- AI Cards -->
  <div id="aiContent" class="grid grid-cols-1 md:grid-cols-2 gap-4 hidden">
    <div class="card bg-gray-800 p-4 rounded premium">
      <h3 class="font-bold text-lg">Auto Enhance ðŸ’Ž</h3>
      <button id="autoEnhanceBtn" class="bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded mt-2 w-full">Apply</button>
    </div>
    <div class="card bg-gray-800 p-4 rounded premium">
      <h3 class="font-bold text-lg">AI Colorize ðŸ’Ž</h3>
      <button id="colorizeBtn" class="bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded mt-2 w-full">Apply</button>
    </div>
    <div class="card bg-gray-800 p-4 rounded premium">
      <h3 class="font-bold text-lg">AI Smart Sharpen ðŸ’Ž</h3>
      <button id="smartSharpenBtn" class="bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded mt-2 w-full">Apply</button>
    </div>
  </div>

</section>

<script>
// Page Tabs
function showPage(pageId){
  document.getElementById('landing').classList.add('hidden');
  document.getElementById('dashboard').classList.add('hidden');
  document.getElementById(pageId).classList.remove('hidden');
}

// Tabs
const manualTab=document.getElementById('manualTab');
const aiTab=document.getElementById('aiTab');
const manualContent=document.getElementById('manualContent');
const aiContent=document.getElementById('aiContent');
manualTab.addEventListener('click',()=>{
  manualContent.classList.remove('hidden'); aiContent.classList.add('hidden');
  manualTab.classList.add('bg-blue-600'); manualTab.classList.remove('bg-gray-700');
  aiTab.classList.remove('bg-blue-600'); aiTab.classList.add('bg-gray-700');
});
aiTab.addEventListener('click',()=>{
  aiContent.classList.remove('hidden'); manualContent.classList.add('hidden');
  aiTab.classList.add('bg-blue-600'); aiTab.classList.remove('bg-gray-700');
  manualTab.classList.remove('bg-blue-600'); manualTab.classList.add('bg-gray-700');
});

// Canvas & Image
const canvas=document.getElementById('canvas');
const ctx=canvas.getContext('2d');
const uploadInput=document.getElementById('uploadInput');
const downloadBtn=document.getElementById('downloadBtn');
const resetBtn=document.getElementById('resetBtn');
const resolutionSelect=document.getElementById('resolutionSelect');
const undoBtn=document.getElementById('undoBtn');
const redoBtn=document.getElementById('redoBtn');

let img=new Image();
let originalData=null;
let history=[]; let historyStep=-1;

uploadInput.addEventListener('change',e=>{
  const file=e.target.files[0];
  if(!file) return;
  const reader=new FileReader();
  reader.onload=function(ev){ img.src=ev.target.result; }
  reader.readAsDataURL(file);
});

img.onload=function(){
  canvas.width=img.width;
  canvas.height=img.height;
  ctx.drawImage(img,0,0);
  originalData=ctx.getImageData(0,0,canvas.width,canvas.height);
  saveHistory();
}

// Save History
function saveHistory(){
  if(historyStep<history.length-1) history=history.slice(0,historyStep+1);
  history.push(ctx.getImageData(0,0,canvas.width,canvas.height));
  historyStep++;
}

// Undo/Redo
undoBtn.addEventListener('click',()=>{
  if(historyStep>0){ historyStep--; ctx.putImageData(history[historyStep],0,0); }
});
redoBtn.addEventListener('click',()=>{
  if(historyStep<history.length-1){ historyStep++; ctx.putImageData(history[historyStep],0,0); }
});

// Filters
function applyFilters(){
  if(!originalData) return;
  const data=new ImageData(new Uint8ClampedArray(originalData.data),originalData.width,originalData.height);
  const brightness=parseInt(document.querySelector('.brightnessSlider').value);
  const saturation=parseInt(document.querySelector('.saturationSlider').value);
  const hue=parseInt(document.querySelector('.hueSlider').value);
  const sharp=parseInt(document.querySelector('.sharpnessSlider').value);
  const noise=parseInt(document.querySelector('.noiseSlider').value);

  for(let i=0;i<data.data.length;i+=4){
    let r=data.data[i],g=data.data[i+1],b=data.data[i+2];

    // Brightness
    r+=brightness; g+=brightness; b+=brightness;

    // Saturation
    let avg=(r+g+b)/3;
    r=avg+(r-avg)*(1+saturation/100);
    g=avg+(g-avg)*(1+saturation/100);
    b=avg+(b-avg)*(1+saturation/100);

    // Hue rotation (simplified)
    let angle=hue*Math.PI/180;
    let cosA=Math.cos(angle), sinA=Math.sin(angle);
    let r2=r*cosA-b*sinA;
    let b2=r*sinA+b*cosA;
    r=r2; b=b2;

    // Sharpness (simple edge enhance)
    r+=sharp; g+=sharp; b+=sharp;

    // Noise Reduction (simple blur)
    r=r*(1-noise/10)+avg*(noise/10);
    g=g*(1-noise/10)+avg*(noise/10);
    b=b*(1-noise/10)+avg*(noise/10);

    // Clamp
    data.data[i]=Math.min(255,Math.max(0,r));
    data.data[i+1]=Math.min(255,Math.max(0,g));
    data.data[i+2]=Math.min(255,Math.max(0,b));
  }

  ctx.putImageData(data,0,0);
  saveHistory();
}

// Event Sliders
document.querySelectorAll('.slider').forEach(slider=>{
  slider.addEventListener('input',applyFilters);
});

// Reset
resetBtn.addEventListener('click',()=>{
  if(originalData) ctx.putImageData(originalData,0,0);
  document.querySelectorAll('.slider').forEach(s=>s.value=0);
  saveHistory();
});

// AI Buttons
document.getElementById('autoEnhanceBtn').addEventListener('click',()=>{
  document.querySelector('.brightnessSlider').value=20;
  document.querySelector('.saturationSlider').value=30;
  document.querySelector('.hueSlider').value=0;
  applyFilters();
});
document.getElementById('colorizeBtn').addEventListener('click',()=>{
  document.querySelector('.brightnessSlider').value=0;
  document.querySelector('.saturationSlider').value=40;
  document.querySelector('.hueSlider').value=15;
  applyFilters();
});
document.getElementById('smartSharpenBtn').addEventListener('click',()=>{
  document.querySelector('.sharpnessSlider').value=5;
  applyFilters();
});

// Download
downloadBtn.addEventListener('click',()=>{
  if(!canvas) return;
  const scale=parseFloat(resolutionSelect.value);
  const tempCanvas=document.createElement('canvas');
  tempCanvas.width=canvas.width*scale;
  tempCanvas.height=canvas.height*scale;
  const tempCtx=tempCanvas.getContext('2d');
  tempCtx.drawImage(canvas,0,0,tempCanvas.width,tempCanvas.height);
  const link=document.createElement('a');
  link.download='dsrt_image.png';
  link.href=tempCanvas.toDataURL('image/png');
  link.click();
});
</script>
</body>
</html>
